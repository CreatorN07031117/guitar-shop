{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\imail\\\\Desktop\\\\Projects\\\\guitar-shop\\\\src\\\\components\\\\guitar-page\\\\gutar-page.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { store } from '../../store/store';\nimport Header from '../header/header';\nimport Footer from '../footer/footer';\nimport CommentsList from './components/comments/comments';\nimport TabCharacteristics from './components/tab-characteristics/tab-characteristics';\nimport TabDescription from './components/tab-description/tab-description';\nimport CartAddPopup from '../cart-add-popup/cart-add-popup';\nimport CartAddSuccess from '../cart-add-success/cart-add-success';\nimport { deleteComments } from '../../store/product-process/product-process';\nimport { fetchGuitarActions, fetchCommentsActions } from '../../store/api-actions';\nimport { useAppSelector } from '../../hooks/use-app-selector';\nimport { useAppDispatch } from '../../hooks/use-app-dispatch';\nimport { getRatingStars, getRetinaImg } from '../../utils';\nimport { AppRoute, GuitarType } from '../../const';\nimport { spotRating } from '../../utils';\nimport style from './guitar-page.module.css';\nimport '../app/app.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction GuitarPage() {\n  _s();\n\n  var _guitar$price;\n\n  const dispatch = useAppDispatch();\n  const params = useParams();\n  useEffect(() => {\n    dispatch(deleteComments());\n    dispatch(fetchCommentsActions(params.id));\n    console.log(dispatch(fetchCommentsActions(params.id)));\n    store.dispatch(fetchGuitarActions(params.id));\n  }, [dispatch, params.id]);\n  const [selectGuitarId, setSelectGuitarId] = useState(null);\n  const [addToCart, setAddToCart] = useState(false);\n  const [activeTab, setActiveTab] = useState('characteristics');\n  const {\n    guitar,\n    comments,\n    isDataLoaded\n  } = useAppSelector(_ref => {\n    let {\n      PRODUCT\n    } = _ref;\n    return PRODUCT;\n  });\n  const rating = getRatingStars(guitar.rating);\n  let retinaImg;\n\n  if (guitar.previewImg) {\n    retinaImg = getRetinaImg(guitar.previewImg);\n  }\n\n  const getGuitarType = type => {\n    if (type === 'electric') {\n      return GuitarType.Electric;\n    } else if (type === 'ukulele') {\n      return GuitarType.Ukulele;\n    } else if (type === 'acoustic') {\n      return GuitarType.Acoustic;\n    } else {\n      return type;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.wrapper,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: style.pageContent,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.container,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: style.titleBigger,\n          children: guitar.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: style.breadcrumbs,\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: style.breadcrumbsItem,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: AppRoute.Index,\n              children: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: style.breadcrumbsItem,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: AppRoute.Catalog,\n              children: \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: style.breadcrumbsItem,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"link\",\n              children: guitar.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.productContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: style.productContainerImg,\n            src: `../${guitar.previewImg}`,\n            srcSet: `../${retinaImg}`,\n            width: \"90\",\n            height: \"235\",\n            alt: guitar.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.productContainerInfoWapper,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: style.productContainerTitle,\n              children: guitar.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.rate,\n              children: [rating.map((item, index) => /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"14\",\n                height: \"14\",\n                \"aria-hidden\": \"true\",\n                children: /*#__PURE__*/_jsxDEV(\"use\", {\n                  xlinkHref: item,\n                  children: \" \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 21\n                }, this)\n              }, item.concat(index.toString()), false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: style.visuallyHidden,\n                children: [\"\\u041E\\u0446\\u0435\\u043D\\u043A\\u0430: \", spotRating(guitar.rating)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: style.rateCount,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"visually-hidden\",\n                  children: \"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043E\\u0446\\u0435\\u043D\\u043E\\u043A:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 48\n                }, this), comments === null || comments === void 0 ? void 0 : comments.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.tabs,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: activeTab === 'description' ? style.tabsButtonBlackBorder : style.tabsButton,\n                onClick: () => {\n                  setActiveTab(prevActiveTab => prevActiveTab = 'characteristics');\n                },\n                children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: activeTab === 'characteristics' ? style.tabsButtonBlackBorder : style.tabsButton,\n                onClick: () => {\n                  setActiveTab(prevActiveTab => prevActiveTab = 'description');\n                },\n                children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: style.tabsContent,\n                id: \"characteristics\",\n                children: activeTab === 'characteristics' ? /*#__PURE__*/_jsxDEV(TabCharacteristics, {\n                  vendorCode: guitar.vendorCode,\n                  type: getGuitarType(guitar.type),\n                  stringCount: guitar.stringCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(TabDescription, {\n                  description: guitar.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.productContainerPriceWrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: style.priceInfoTitle,\n              children: \"\\u0426\\u0435\\u043D\\u0430:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: style.priceInfoValue,\n              children: [(_guitar$price = guitar.price) === null || _guitar$price === void 0 ? void 0 : _guitar$price.toLocaleString(), \" \\u20BD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: style.addToCartButton,\n              onClick: () => {\n                setSelectGuitarId(guitar.id);\n              },\n              children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), isDataLoaded ? /*#__PURE__*/_jsxDEV(CommentsList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u044E\\u0442\\u0441\\u044F...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), selectGuitarId === null ? null : /*#__PURE__*/_jsxDEV(CartAddPopup, {\n      guitar: guitar,\n      onGuitarId: id => setSelectGuitarId(id),\n      onAddSuccess: value => setAddToCart(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this), addToCart && /*#__PURE__*/_jsxDEV(CartAddSuccess, {\n      onAddSuccess: value => setAddToCart(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GuitarPage, \"3LaeShN9n6202C8ZCAAmlOidkcE=\", false, function () {\n  return [useAppDispatch, useParams, useAppSelector];\n});\n\n_c = GuitarPage;\nexport default GuitarPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"GuitarPage\");","map":{"version":3,"sources":["C:/Users/imail/Desktop/Projects/guitar-shop/src/components/guitar-page/gutar-page.tsx"],"names":["useEffect","useState","Link","useParams","store","Header","Footer","CommentsList","TabCharacteristics","TabDescription","CartAddPopup","CartAddSuccess","deleteComments","fetchGuitarActions","fetchCommentsActions","useAppSelector","useAppDispatch","getRatingStars","getRetinaImg","AppRoute","GuitarType","spotRating","style","GuitarPage","dispatch","params","id","console","log","selectGuitarId","setSelectGuitarId","addToCart","setAddToCart","activeTab","setActiveTab","guitar","comments","isDataLoaded","PRODUCT","rating","retinaImg","previewImg","getGuitarType","type","Electric","Ukulele","Acoustic","wrapper","pageContent","container","titleBigger","name","breadcrumbs","breadcrumbsItem","Index","Catalog","productContainer","productContainerImg","productContainerInfoWapper","productContainerTitle","rate","map","item","index","concat","toString","visuallyHidden","rateCount","length","tabs","tabsButtonBlackBorder","tabsButton","prevActiveTab","tabsContent","vendorCode","stringCount","description","productContainerPriceWrapper","priceInfoTitle","priceInfoValue","price","toLocaleString","addToCartButton","value"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react';\r\nimport {Link, useParams} from 'react-router-dom';\r\nimport {store} from '../../store/store';\r\nimport Header from '../header/header';\r\nimport Footer from '../footer/footer';\r\nimport CommentsList from './components/comments/comments';\r\nimport TabCharacteristics from './components/tab-characteristics/tab-characteristics';\r\nimport TabDescription from './components/tab-description/tab-description';\r\nimport CartAddPopup from '../cart-add-popup/cart-add-popup';\r\nimport CartAddSuccess from '../cart-add-success/cart-add-success';\r\nimport {deleteComments} from '../../store/product-process/product-process';\r\nimport {fetchGuitarActions, fetchCommentsActions} from '../../store/api-actions';\r\nimport {useAppSelector} from '../../hooks/use-app-selector';\r\nimport {useAppDispatch} from '../../hooks/use-app-dispatch';\r\nimport {getRatingStars, getRetinaImg} from '../../utils';\r\nimport {AppRoute, GuitarType} from '../../const';\r\nimport {spotRating} from '../../utils';\r\nimport style from './guitar-page.module.css';\r\nimport '../app/app.module.css';\r\n\r\n\r\nfunction GuitarPage(): JSX.Element {\r\n  const dispatch = useAppDispatch();\r\n  const params = useParams();\r\n\r\n  useEffect(() => {\r\n    dispatch(deleteComments());\r\n    dispatch(fetchCommentsActions(params.id as string));\r\n    console.log(dispatch(fetchCommentsActions(params.id as string)))\r\n    store.dispatch(fetchGuitarActions(params.id as string));\r\n  }, [dispatch, params.id]);\r\n\r\n  const [selectGuitarId, setSelectGuitarId] = useState <null | number> (null);\r\n  const [addToCart, setAddToCart] = useState <boolean> (false);\r\n  const [activeTab, setActiveTab] = useState ('characteristics');\r\n\r\n  const {guitar, comments, isDataLoaded} = useAppSelector(({PRODUCT}) => PRODUCT);\r\n  const rating = getRatingStars(guitar.rating);\r\n\r\n  let retinaImg;\r\n  if(guitar.previewImg){\r\n    retinaImg = getRetinaImg(guitar.previewImg);\r\n  }\r\n\r\n  const getGuitarType = (type:string) => {\r\n    if(type === 'electric'){\r\n      return GuitarType.Electric;\r\n    } else if(type === 'ukulele'){\r\n      return GuitarType.Ukulele;\r\n    } else if(type === 'acoustic'){\r\n      return GuitarType.Acoustic;\r\n    } else{\r\n      return type;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={style.wrapper}>\r\n      <Header />\r\n      <main className={style.pageContent}>\r\n        <div className={style.container}>\r\n          <h1 className={style.titleBigger}>{guitar.name}</h1>\r\n          <ul className={style.breadcrumbs}>\r\n            <li className={style.breadcrumbsItem}>\r\n              <Link to={AppRoute.Index}>Главная</Link>\r\n            </li>\r\n            <li className={style.breadcrumbsItem}>\r\n              <Link to={AppRoute.Catalog}>Каталог</Link>\r\n            </li>\r\n            <li className={style.breadcrumbsItem}>\r\n              <span className=\"link\">{guitar.name}</span>\r\n            </li>\r\n          </ul>\r\n          <div className={style.productContainer}>\r\n            <img className={style.productContainerImg} src={`../${guitar.previewImg}`} srcSet={`../${retinaImg}`} width=\"90\" height=\"235\" alt={guitar.name} />\r\n            <div className={style.productContainerInfoWapper}>\r\n              <h2 className={style.productContainerTitle}>{guitar.name}</h2>\r\n              <div className={style.rate}>\r\n                {rating.map((item, index) => (\r\n                  <svg key={item.concat(index.toString())} width=\"14\" height=\"14\" aria-hidden=\"true\">\r\n                    <use xlinkHref={item}> </use>\r\n                  </svg>\r\n                ))}\r\n                <p className={style.visuallyHidden}>Оценка: {spotRating(guitar.rating)}</p>\r\n                <p className={style.rateCount}><span className=\"visually-hidden\">Всего оценок:</span>{comments?.length}</p>\r\n              </div>\r\n              <div className={style.tabs}>\r\n                <span className={activeTab === 'description'? style.tabsButtonBlackBorder : style.tabsButton }\r\n                  onClick={() => {\r\n                    setActiveTab((prevActiveTab) => (prevActiveTab='characteristics'));\r\n                  }}\r\n                >\r\n                    Характеристики\r\n                </span>\r\n                <span className={activeTab === 'characteristics'? style.tabsButtonBlackBorder : style.tabsButton}\r\n                  onClick={() => {\r\n                    setActiveTab((prevActiveTab) => (prevActiveTab='description'));\r\n                  }}\r\n                >\r\n                  Описание\r\n                </span>\r\n                <div className={style.tabsContent} id=\"characteristics\">\r\n                  {activeTab==='characteristics'?\r\n                    <TabCharacteristics vendorCode={guitar.vendorCode} type={getGuitarType(guitar.type)} stringCount={guitar.stringCount} /> :\r\n                    <TabDescription description={guitar.description} />}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className={style.productContainerPriceWrapper}>\r\n              <p className={style.priceInfoTitle}>Цена:</p>\r\n              <p className={style.priceInfoValue}>{guitar.price?.toLocaleString()} ₽</p>\r\n              <span\r\n                className={style.addToCartButton}\r\n                onClick={() => {\r\n                  setSelectGuitarId(guitar.id);\r\n                }}\r\n              >\r\n                Добавить в корзину\r\n              </span>\r\n            </div>\r\n          </div>\r\n          {isDataLoaded? <CommentsList /> : (<p>Комментарии загружаются...</p>)}\r\n        </div>\r\n      </main>\r\n      <Footer />\r\n      {selectGuitarId===null?\r\n        null :\r\n        <CartAddPopup\r\n          guitar={guitar}\r\n          onGuitarId={(id) => setSelectGuitarId(id)}\r\n          onAddSuccess={(value: boolean) => setAddToCart(value)}\r\n        />}\r\n      {addToCart && <CartAddSuccess onAddSuccess={(value: boolean) => setAddToCart(value)}/>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GuitarPage;\r\n"]},"metadata":{},"sourceType":"module"}